/*	сохраняем данный файл в кодировке UTF-8		*/

	author: Golinskiy Konstantin	e-mail: golinskiy.konstantin@gmail.com
	
	
	в файле "Si5351.h" указываем настройки ( номер шины i2c, частоту кварца на модуле, и адрес микросхемы )
	//----------------------------------------------------------------------
	// адрес устройства
	#define SISYNTH_DEV_ADDR 							(0x60<<1)
	#define RDP_I2C										hi2c1

	#define XTAL_FREQ       							25000000 		// Частота кварца 25MHz
	//#define XTAL_FREQ       						27000000 		// Частота кварца 27MHz
	//----------------------------------------------------------------------


	#include "Si5351.h"
	.........
	.........

main()=============================================================================================================================

	.........
	.........
	.........

//////////////////////////////////////////////////////////////////////////////////////////////

	// паременные для настройки модуля
	si5351PLLConfig_t pll_conf;
	si5351OutputConfig_t out_conf;
	uint8_t enabledOutputs = 0;

	// коефициент корректировки частоты
	const int32_t correction = 978;
	
	// при инициализации включаем внутрение конденсаторы ( зависит от кварца внешнего )
	si5351_Init(correction, SI5351_CRYSTAL_LOAD_10PF);
	
	//--- канал 0 ---------------------------------------------------------------------
	// указываем нужную нам частоту
	si5351_CalcIQ(15000000, &pll_conf, &out_conf);	// 15Mhz
	
	// настраиваем канал ( указав номер канала, PLL А или В, мощность сигнала, конфиг, и если нужен сдвиг сигнала )
#if 1
	si5351_SetupOutput(SI5351_CLK0, SI5351_PLL_A, SI5351_DRIVE_STRENGTH_4MA, &out_conf, 0);
#else
	// для сдвига на 90 градусов сигнала
	uint8_t phaseOffset = (uint8_t)out_conf.div;
	// настраиваем канал ( указав номер канала, PLL А или В, мощность сигнала, конфиг, и если нужен сдвиг сигнала )
	si5351_SetupOutput(SI5351_CLK0, SI5351_PLL_A, SI5351_DRIVE_STRENGTH_4MA, &out_conf, phaseOffset);
#endif
	// записываем текущие настройки в указанный PLL А или В
	si5351_SetupPLL(SI5351_PLL_A, &pll_conf);
	//----------------------------------------------------------------------------------
	
	
	//--- канал 1 ---------------------------------------------------------------------
	// указываем нужную нам частоту
	si5351_CalcIQ(18000000, &pll_conf, &out_conf);	// 18Mhz
	// настраиваем канал ( указав номер канала, PLL А или В, мощность сигнала, конфиг, и если нужен сдвиг сигнала )
	si5351_SetupOutput(SI5351_CLK1, SI5351_PLL_A, SI5351_DRIVE_STRENGTH_4MA, &out_conf, 0);
	// записываем текущие настройки в указанный PLL А или В
	si5351_SetupPLL(SI5351_PLL_A, &pll_conf);
	//----------------------------------------------------------------------------------
	
	
	//--- канал 2 ---------------------------------------------------------------------
	// указываем нужную нам частоту
	si5351_CalcIQ(10000000, &pll_conf, &out_conf);	// 10Mhz
	// настраиваем канал ( указав номер канала, PLL А или В, мощность сигнала, конфиг, и если нужен сдвиг сигнала )
	si5351_SetupOutput(SI5351_CLK2, SI5351_PLL_A, SI5351_DRIVE_STRENGTH_4MA, &out_conf, 0);
	// записываем текущие настройки в указанный PLL А или В
	si5351_SetupPLL(SI5351_PLL_A, &pll_conf);
	//----------------------------------------------------------------------------------
	
	
	// активируем ( запускаем ) каналы --------------------------------
	// если какойто нужно выключить в процесе программы то обнуляем нужный бит
	// и повторно вызываем si5351_EnableOutputs(enabledOutputs);
	enabledOutputs |= (1 << SI5351_CLK0);
	enabledOutputs |= (1 << SI5351_CLK1);
	enabledOutputs |= (1 << SI5351_CLK2);
	
	si5351_EnableOutputs(enabledOutputs);
	//------------------------------------------------------------------
	
	
/////////////////////////////////////////////////////////////////////////////////////////////


while(1)===========================================================================================================================

	.........
	.........
	.........
	.........

=== end while(1) ==================================================================================================================
=== end main() ====================================================================================================================
